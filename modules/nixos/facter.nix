{
  lib,
  config,
  ...
}:
{
  imports = [
    ./bluetooth.nix
    ./camera
    ./disk.nix
    ./debug.nix
    ./fingerprint
    ./firmware.nix
    ./graphics
    ./keyboard.nix
    ./networking
    ./system.nix
    ./virtualisation.nix
  ];

  options.facter = with lib; {
    report = mkOption {
      type = types.attrsOf types.anything;
      default =
        if config.facter.reportPath == null then
          { }
        else
          builtins.fromJSON (builtins.readFile config.facter.reportPath);
      defaultText = "A JSON import from config.facter.reportPath (if not null), {} otherwise.";
      description = "An import for the reportPath.";
    };

    reportPath = mkOption {
      type = types.nullOr types.path;
      default = null;
      description = "Path to a report generated by nixos-facter.";
    };
  };
}
